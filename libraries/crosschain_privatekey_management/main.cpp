
#include <graphene/crosschain_privatekey_management/private_key.hpp>
#include <graphene/crosschain_privatekey_management/database_privatekey.hpp>
#include "fc/crypto/base58.hpp"
#include <bitcoin/bitcoin.hpp>
#include <graphene/crosschain_privatekey_management/util.hpp>
#include <graphene/chain/protocol/address.hpp>
#include <graphene/chain/protocol/types.hpp>
#include <graphene/utilities/key_conversion.hpp>
#include <fc/crypto/elliptic.hpp>
#include <string> 
#include <vector> 
#include <iostream>
#include <fc/thread/thread.hpp>
#include <fc/crypto/hex.hpp>
#include <fc/crypto/aes.hpp>
#include <graphene/wallet/wallet.hpp>

#include "../common.hpp"


// 
// std::string key_to_compressed_wif(const fc::sha256& secret)
// {
//     //one byte for prefix, one byte for compressed sentinel
// 	const size_t size_of_data_to_hash = sizeof(secret) + 2;	
// 	const size_t size_of_hash_bytes = 4;
// 	char data[size_of_data_to_hash  + size_of_hash_bytes];
// 	data[0] = (char)0x80;
// 	memcpy(&data[1], (char*)&secret, sizeof(secret));
// 	data[size_of_data_to_hash - 1] = (char)0x01;
// 	fc::sha256 digest = fc::sha256::hash(data, size_of_data_to_hash);
// 	digest = fc::sha256::hash(digest);
// 	memcpy(data + size_of_data_to_hash, (char*)&digest, size_of_hash_bytes);
// 	return fc::to_base58(data, sizeof(data));
// }
// std::string key_to_compressed_wif(const fc::ecc::private_key& key)
// {
// 	return key_to_compressed_wif(key.get_secret());
// }

namespace graphene {
	namespace privatekey_management {

	}
}
int main(int argc, char** argv)
{
	using namespace graphene::privatekey_management;
	
	
// 	// test private key generation
// 	btc_privatekey btc_priv;
// 	auto btc_wif_key = btc_priv.get_wif_key();
// 	printf("btc wif key: %s\n", btc_wif_key.c_str());
// 	auto btc_addr = btc_priv.get_address();
// 	printf("btc address: %s\n", btc_addr.c_str());
// 
// 	auto import_btc_priv_key = btc_priv.import_private_key(btc_wif_key);
// 	btc_privatekey import_btc_priv(*import_btc_priv_key);
// 	btc_wif_key = import_btc_priv.get_wif_key();
// 	printf("imported btc wif key: %s\n", btc_wif_key.c_str());
// 
// 
// 	ltc_privatekey ltc_priv;
// 	auto ltc_wif_key = ltc_priv.get_wif_key();
// 	printf("ltc wif key: %s\n", ltc_wif_key.c_str());
// 	auto ltc_addr = ltc_priv.get_address();
// 	printf("ltc address: %s\n", ltc_addr.c_str());
// 	auto import_ltc_priv_key = ltc_priv.import_private_key(ltc_wif_key);
// 	ltc_privatekey import_ltc_priv(*import_ltc_priv_key);
// 	ltc_wif_key = import_ltc_priv.get_wif_key();
// 	printf("imported ltc wif key: %s\n", ltc_wif_key.c_str());



// 	database_privatekey db_priv;

// 	std::string password = "123456";
// 	auto checksum = fc::sha512::hash(password.c_str(), password.size());
// 

// 	for (auto i = 0; i < 10; i++)
// 	{
// 		printf("current index: %d\n", i + 1);
// 
// 		btc_privatekey btc_priv;
// 		auto btc_wif_key = btc_priv.get_wif_key(btc_priv.get_private_key());
// 		printf("btc wif key: %s\n", btc_wif_key.c_str());
// 		auto btc_addr = btc_priv.get_address(btc_priv.get_private_key());
// 		printf("btc address: %s\n", btc_addr.c_str());
// 		auto import_btc_priv_key = btc_priv.import_private_key(btc_wif_key);
// 		btc_wif_key = btc_priv.get_wif_key(*import_btc_priv_key);
// 		printf("imported btc wif key: %s\n", btc_wif_key.c_str());
// 
// 
// 
// 		crosschain_privatekey_data data;
// 		data.id = i+1;
// 		data.addr = btc_priv.get_address(btc_priv.get_private_key());
// 		data.wif_key = btc_priv.get_wif_key(btc_priv.get_private_key());
// 
// 	
// 
// 		db_priv.store(data, checksum);
// 	}	
// 
// 	printf("\n");
// 	auto result = db_priv.fetch_by_id(3, checksum);
// 	printf("%s\n", result->wif_key.c_str());
// 
// 	auto max_id = db_priv.fetch_current_max_id();
// 	printf("%d\n", max_id);


	//btc_privatekey priv;

	//std::string script = "OP_HASH160 97f0c041b556fbb141364790b596cd9b3b2b403b OP_EQUAL";
	//std::string redeemscript = "552103045651fb6f856ce1b27fb173e44d8bd30842d4459fa586353a69cb276384e0522103caf30dcebba7c04e973b4afa394f0199e4c5a387faa5cec31b06dffe6592bd2e2103b5b29f6bba2c73fe7a3a0a2fa0f1aab23c5cf827686d605e9ab15cc281ac327221039a935048686f7bd83d8de10ec614b1b767ce74902e25c4a67632b225c64043162102b7730bb1aa8289f8028fe9315c5002860bc3578c87f26abb63c9ef2ca3fcfe5f210262b4fc622eb191a61f209cf890799fd141d003cc6ef721c192974120d5370a4e2102ca9c947b9a73f1819759aca131680aa0d0263c4130a2710d1a13b1d7755b9e9057ae";
	//std::string raw_trx = "020000000117749ee7407b9a0511b742f9510d047a5edccef7d102377e573d3757ce509c540100000000ffffffff02000e2707000000001976a91428e13ec311b8b377288d069a489a0136ef967ca788ac603572340000000017a914537b76690c6d13d89ebe5d0e029c8f1c346a9fe38700000000";
	//auto temp1 = graphene::privatekey_management::mutisign_trx("L2TtkoupXw4cYZebqUmSAEvnEh5K7pMAWEY9Tqih2CNdE7QcqR48",redeemscript, raw_trx);
	////std::cout << "1:" << temp1<< std::endl;
	//auto temp2 = graphene::privatekey_management::mutisign_trx("KyJYWeAxYoxU5wCaGQKjqi73sK1QQBDsnvyGJB5LJP1XKahVj8mr", redeemscript, raw_trx);
	////std::cout << "2:" << temp2 << std::endl;

	//if (temp1 == temp2)
	//{
	//	std::cout << "same signature" << std::endl;
	//}
	string password = "12345ssdlh";
	vector<char> cipher_keys;
	string hex_string = "f623ebae490f6e72508ff950c3d462f274ce915aafdebd8d5c75b281975b2830df7e1af4b570ce3b03ab630b22613e6c33bbcfcced5cddecf6577ed196e5d1bbd368fa0ea48a59d467589125f9a92657515e6dad0a0893f2e682bdaf6923e3414144f6166bc9988276ffbbaba7ff56359ee0e02942dc9fc17d9479b8b00a0db02a32f95054b263b1e5722c41bd3b4970";
	char cipher_key_char[144];
	fc::from_hex(hex_string, cipher_key_char, 144);
	for (int i = 0; i < 144; i++) {
		cipher_keys.push_back(cipher_key_char[i]);
	}
		FC_ASSERT(password.size() > 0);
		auto pw = fc::sha512::hash(password.c_str(), password.size());

		vector<char> decrypted = fc::aes_decrypt(pw, cipher_keys);
		std::cout << unsigned(decrypted[21]) << std::endl;
		auto pk = fc::raw::unpack<graphene::wallet::plain_keys>(decrypted);
		FC_ASSERT(pk.checksum == pw);
		for (auto iter = pk.keys.begin(); iter != pk.keys.end(); iter++) {
			std::cout << graphene::chain::address(iter->first).address_to_string() << " : " << iter->second << endl;
		}
		getchar();
		fc::http::connection_sync conn;
		conn.connect_to(fc::ip::endpoint(fc::ip::address(XWC_MIDWARE_IP),80));
		//auto res = conn.parse_reply();
		auto response = conn.request("GET", "http://1000896736104835.cn-hongkong.fc.aliyuncs.com/2016-08-15/proxy/query_XWC_middleware_endpoint/query_middleware_endpoint/", " ");
		std::cout << response.body << std::endl;
	
	getchar();

	
	


	btc_privatekey priv1;

	std::string signature1 = "0x8d4583a002a1ee21c9fbc688c51c960508fe4d68dac16f571a3a50b460c38b9d2acffe29ac065670a178aab140a57cb7d47791896fd8111ebdeecffcdc8cb5be1c";
	std::string message1 = "0x476e8cb6e378ae523d4016babf53569654ed2fcc";
	auto res1 = priv1.verify_message(message1,  message1, signature1);
	std::cout << "eth res: " << res1 << std::endl;
	fc::thread my_thread;

	fc::variant_object config = fc::json::from_string("{\"ip\":\"127.0.0.1\",\"port\":5005}").get_object();




	
	
	my_thread.async([&]() {
		

	});

	
	
	btc_privatekey priv_btc;
	std::vector<std::string> a = { "0200000001f9f960f336656d7cb90463735a8516113f4493516d43b893e5338cff6d25179301000000fd4d020047304402202d4bcbfdf06682ef21a548ea89464ed765159c347ade5d9fb82ade29f8139d550220182012a25eb7e96cb652ac3f55050ac2353173637b2a87c80d1528267b0101a5014d01025b210209f45f7adb48d3a2bcc62ab49a29df822fdaf6b2c1e26afc48529a6a4272240c21023a37b1ec16f5d073ed4c1c435ac0dad2031f2d0188d439a5655b3bd1e8d9f0d72103a9e498958e3b816c89a6886adadc65a67e3658dfbc0c2a8d898536a64bb14ee22103d99a8ac95d78488394f0611bf3a654a726bb47b1453ed8ba93a26a868419c858210276447b1c51823c89359b64ae03ce23497caee8e4a3ce0b0616b18102c2f909122103b935a588f8d1f38af0926ba8b32fa4d2f549e97129544852922a45d4853b9a7e2103a154c3e59040df072d6a82a322a8cc48c142f85745749bb4147dfb0265a3c7382102bdbdb15ab4495025990f99edb7ab29f1fed3ae10b6631a7aa0a837053273cbb421039bf0b4f48b33456fca71f541143a5b4c0195e138ccc51ef71d1d4c25a8c3258a2102a7822cd38afae7a31cf8f5443c91c877d1931aeb58bd319fa7c95a7666bb07852102d23df29f6c723e0ea71b9841c010e18011462ec03a709e8fbd9c1e5ae89967e821026d80ea22ec04ac402a2056b6f10244956f51635825cb1c01f5ca0fe47e336d3321038da52155bb32fd7c835226c1aa8912eab50d214dea29e16a50625c624cc5747f21038a99963e63b998ebf3b02929927f0ab6220241c81589d97f41e6dadf1963f04b210235de1c98d9021cad75aaaf9ebd2a473e1ebf846d0c9d164b648782edacca10a25faeffffffff02c8b654180000000017a91492fb55f5343846b6acfc269a615a82a800f5d6ad87a0fab8010000000017a9141592f4033152839c02b3716cc57dd02ad4bdb1ec8700000000",
"0200000001f9f960f336656d7cb90463735a8516113f4493516d43b893e5338cff6d25179301000000fd4d0200473044022013ef261b997d9742a7b73b6f778e28456d3cb3e6de61307ffcc48e4feb55d615022056fd0e1563a38f261ce1908fec09dc5020b874c297594d07246efc98b1c77427014d01025b210209f45f7adb48d3a2bcc62ab49a29df822fdaf6b2c1e26afc48529a6a4272240c21023a37b1ec16f5d073ed4c1c435ac0dad2031f2d0188d439a5655b3bd1e8d9f0d72103a9e498958e3b816c89a6886adadc65a67e3658dfbc0c2a8d898536a64bb14ee22103d99a8ac95d78488394f0611bf3a654a726bb47b1453ed8ba93a26a868419c858210276447b1c51823c89359b64ae03ce23497caee8e4a3ce0b0616b18102c2f909122103b935a588f8d1f38af0926ba8b32fa4d2f549e97129544852922a45d4853b9a7e2103a154c3e59040df072d6a82a322a8cc48c142f85745749bb4147dfb0265a3c7382102bdbdb15ab4495025990f99edb7ab29f1fed3ae10b6631a7aa0a837053273cbb421039bf0b4f48b33456fca71f541143a5b4c0195e138ccc51ef71d1d4c25a8c3258a2102a7822cd38afae7a31cf8f5443c91c877d1931aeb58bd319fa7c95a7666bb07852102d23df29f6c723e0ea71b9841c010e18011462ec03a709e8fbd9c1e5ae89967e821026d80ea22ec04ac402a2056b6f10244956f51635825cb1c01f5ca0fe47e336d3321038da52155bb32fd7c835226c1aa8912eab50d214dea29e16a50625c624cc5747f21038a99963e63b998ebf3b02929927f0ab6220241c81589d97f41e6dadf1963f04b210235de1c98d9021cad75aaaf9ebd2a473e1ebf846d0c9d164b648782edacca10a25faeffffffff02c8b654180000000017a91492fb55f5343846b6acfc269a615a82a800f5d6ad87a0fab8010000000017a9141592f4033152839c02b3716cc57dd02ad4bdb1ec8700000000",
"0200000001f9f960f336656d7cb90463735a8516113f4493516d43b893e5338cff6d25179301000000fd4e0200483045022100d854ebbaf3c95521a53fccdc9a1df9c28114fbc215cf131febebe707d4c2e99d022004ff4f84900ade24c299aee22536d90fe82f997d1867952277621081fb9dd440014d01025b210209f45f7adb48d3a2bcc62ab49a29df822fdaf6b2c1e26afc48529a6a4272240c21023a37b1ec16f5d073ed4c1c435ac0dad2031f2d0188d439a5655b3bd1e8d9f0d72103a9e498958e3b816c89a6886adadc65a67e3658dfbc0c2a8d898536a64bb14ee22103d99a8ac95d78488394f0611bf3a654a726bb47b1453ed8ba93a26a868419c858210276447b1c51823c89359b64ae03ce23497caee8e4a3ce0b0616b18102c2f909122103b935a588f8d1f38af0926ba8b32fa4d2f549e97129544852922a45d4853b9a7e2103a154c3e59040df072d6a82a322a8cc48c142f85745749bb4147dfb0265a3c7382102bdbdb15ab4495025990f99edb7ab29f1fed3ae10b6631a7aa0a837053273cbb421039bf0b4f48b33456fca71f541143a5b4c0195e138ccc51ef71d1d4c25a8c3258a2102a7822cd38afae7a31cf8f5443c91c877d1931aeb58bd319fa7c95a7666bb07852102d23df29f6c723e0ea71b9841c010e18011462ec03a709e8fbd9c1e5ae89967e821026d80ea22ec04ac402a2056b6f10244956f51635825cb1c01f5ca0fe47e336d3321038da52155bb32fd7c835226c1aa8912eab50d214dea29e16a50625c624cc5747f21038a99963e63b998ebf3b02929927f0ab6220241c81589d97f41e6dadf1963f04b210235de1c98d9021cad75aaaf9ebd2a473e1ebf846d0c9d164b648782edacca10a25faeffffffff02c8b654180000000017a91492fb55f5343846b6acfc269a615a82a800f5d6ad87a0fab8010000000017a9141592f4033152839c02b3716cc57dd02ad4bdb1ec8700000000",
"0200000001f9f960f336656d7cb90463735a8516113f4493516d43b893e5338cff6d25179301000000fd4d0200473044022060147a0e14f7809fcc08714a592a35cbec84a9112aaee70a240185af9509f8700220103b446efc10802175801be7491c21bb0a22ed081fbeb3d202ab6be4b65d1ded014d01025b210209f45f7adb48d3a2bcc62ab49a29df822fdaf6b2c1e26afc48529a6a4272240c21023a37b1ec16f5d073ed4c1c435ac0dad2031f2d0188d439a5655b3bd1e8d9f0d72103a9e498958e3b816c89a6886adadc65a67e3658dfbc0c2a8d898536a64bb14ee22103d99a8ac95d78488394f0611bf3a654a726bb47b1453ed8ba93a26a868419c858210276447b1c51823c89359b64ae03ce23497caee8e4a3ce0b0616b18102c2f909122103b935a588f8d1f38af0926ba8b32fa4d2f549e97129544852922a45d4853b9a7e2103a154c3e59040df072d6a82a322a8cc48c142f85745749bb4147dfb0265a3c7382102bdbdb15ab4495025990f99edb7ab29f1fed3ae10b6631a7aa0a837053273cbb421039bf0b4f48b33456fca71f541143a5b4c0195e138ccc51ef71d1d4c25a8c3258a2102a7822cd38afae7a31cf8f5443c91c877d1931aeb58bd319fa7c95a7666bb07852102d23df29f6c723e0ea71b9841c010e18011462ec03a709e8fbd9c1e5ae89967e821026d80ea22ec04ac402a2056b6f10244956f51635825cb1c01f5ca0fe47e336d3321038da52155bb32fd7c835226c1aa8912eab50d214dea29e16a50625c624cc5747f21038a99963e63b998ebf3b02929927f0ab6220241c81589d97f41e6dadf1963f04b210235de1c98d9021cad75aaaf9ebd2a473e1ebf846d0c9d164b648782edacca10a25faeffffffff02c8b654180000000017a91492fb55f5343846b6acfc269a615a82a800f5d6ad87a0fab8010000000017a9141592f4033152839c02b3716cc57dd02ad4bdb1ec8700000000",
"0200000001f9f960f336656d7cb90463735a8516113f4493516d43b893e5338cff6d25179301000000fd4d0200473044022035c3c350b4493a99fcd51292303665dffc941c4206be9db2cff85bd89ec56d2e022023d822049349b8738b791d82c5329f1957270ee061f5cd2c7856bcc4f8b4e5d4014d01025b210209f45f7adb48d3a2bcc62ab49a29df822fdaf6b2c1e26afc48529a6a4272240c21023a37b1ec16f5d073ed4c1c435ac0dad2031f2d0188d439a5655b3bd1e8d9f0d72103a9e498958e3b816c89a6886adadc65a67e3658dfbc0c2a8d898536a64bb14ee22103d99a8ac95d78488394f0611bf3a654a726bb47b1453ed8ba93a26a868419c858210276447b1c51823c89359b64ae03ce23497caee8e4a3ce0b0616b18102c2f909122103b935a588f8d1f38af0926ba8b32fa4d2f549e97129544852922a45d4853b9a7e2103a154c3e59040df072d6a82a322a8cc48c142f85745749bb4147dfb0265a3c7382102bdbdb15ab4495025990f99edb7ab29f1fed3ae10b6631a7aa0a837053273cbb421039bf0b4f48b33456fca71f541143a5b4c0195e138ccc51ef71d1d4c25a8c3258a2102a7822cd38afae7a31cf8f5443c91c877d1931aeb58bd319fa7c95a7666bb07852102d23df29f6c723e0ea71b9841c010e18011462ec03a709e8fbd9c1e5ae89967e821026d80ea22ec04ac402a2056b6f10244956f51635825cb1c01f5ca0fe47e336d3321038da52155bb32fd7c835226c1aa8912eab50d214dea29e16a50625c624cc5747f21038a99963e63b998ebf3b02929927f0ab6220241c81589d97f41e6dadf1963f04b210235de1c98d9021cad75aaaf9ebd2a473e1ebf846d0c9d164b648782edacca10a25faeffffffff02c8b654180000000017a91492fb55f5343846b6acfc269a615a82a800f5d6ad87a0fab8010000000017a9141592f4033152839c02b3716cc57dd02ad4bdb1ec8700000000",
"0200000001f9f960f336656d7cb90463735a8516113f4493516d43b893e5338cff6d25179301000000fd4e0200483045022100f18deff6f32239ab11ba36910a9e0bdde7dc527acfc6143c7b3d4e65dc45ce1f02203801a77ab6a17a1f701390e4372da771b265803a3ff8e094956f850a4ad9bd86014d01025b210209f45f7adb48d3a2bcc62ab49a29df822fdaf6b2c1e26afc48529a6a4272240c21023a37b1ec16f5d073ed4c1c435ac0dad2031f2d0188d439a5655b3bd1e8d9f0d72103a9e498958e3b816c89a6886adadc65a67e3658dfbc0c2a8d898536a64bb14ee22103d99a8ac95d78488394f0611bf3a654a726bb47b1453ed8ba93a26a868419c858210276447b1c51823c89359b64ae03ce23497caee8e4a3ce0b0616b18102c2f909122103b935a588f8d1f38af0926ba8b32fa4d2f549e97129544852922a45d4853b9a7e2103a154c3e59040df072d6a82a322a8cc48c142f85745749bb4147dfb0265a3c7382102bdbdb15ab4495025990f99edb7ab29f1fed3ae10b6631a7aa0a837053273cbb421039bf0b4f48b33456fca71f541143a5b4c0195e138ccc51ef71d1d4c25a8c3258a2102a7822cd38afae7a31cf8f5443c91c877d1931aeb58bd319fa7c95a7666bb07852102d23df29f6c723e0ea71b9841c010e18011462ec03a709e8fbd9c1e5ae89967e821026d80ea22ec04ac402a2056b6f10244956f51635825cb1c01f5ca0fe47e336d3321038da52155bb32fd7c835226c1aa8912eab50d214dea29e16a50625c624cc5747f21038a99963e63b998ebf3b02929927f0ab6220241c81589d97f41e6dadf1963f04b210235de1c98d9021cad75aaaf9ebd2a473e1ebf846d0c9d164b648782edacca10a25faeffffffff02c8b654180000000017a91492fb55f5343846b6acfc269a615a82a800f5d6ad87a0fab8010000000017a9141592f4033152839c02b3716cc57dd02ad4bdb1ec8700000000",
"0200000001f9f960f336656d7cb90463735a8516113f4493516d43b893e5338cff6d25179301000000fd4e0200483045022100c918ecfdddbf2737cbda2461bfe38e0e852a403d0cffb7e7478c66cc42df5071022025a7d0b6284c647fa15e879057c03c04a518a5a6b50b1cdaa53243ad20dd031b014d01025b210209f45f7adb48d3a2bcc62ab49a29df822fdaf6b2c1e26afc48529a6a4272240c21023a37b1ec16f5d073ed4c1c435ac0dad2031f2d0188d439a5655b3bd1e8d9f0d72103a9e498958e3b816c89a6886adadc65a67e3658dfbc0c2a8d898536a64bb14ee22103d99a8ac95d78488394f0611bf3a654a726bb47b1453ed8ba93a26a868419c858210276447b1c51823c89359b64ae03ce23497caee8e4a3ce0b0616b18102c2f909122103b935a588f8d1f38af0926ba8b32fa4d2f549e97129544852922a45d4853b9a7e2103a154c3e59040df072d6a82a322a8cc48c142f85745749bb4147dfb0265a3c7382102bdbdb15ab4495025990f99edb7ab29f1fed3ae10b6631a7aa0a837053273cbb421039bf0b4f48b33456fca71f541143a5b4c0195e138ccc51ef71d1d4c25a8c3258a2102a7822cd38afae7a31cf8f5443c91c877d1931aeb58bd319fa7c95a7666bb07852102d23df29f6c723e0ea71b9841c010e18011462ec03a709e8fbd9c1e5ae89967e821026d80ea22ec04ac402a2056b6f10244956f51635825cb1c01f5ca0fe47e336d3321038da52155bb32fd7c835226c1aa8912eab50d214dea29e16a50625c624cc5747f21038a99963e63b998ebf3b02929927f0ab6220241c81589d97f41e6dadf1963f04b210235de1c98d9021cad75aaaf9ebd2a473e1ebf846d0c9d164b648782edacca10a25faeffffffff02c8b654180000000017a91492fb55f5343846b6acfc269a615a82a800f5d6ad87a0fab8010000000017a9141592f4033152839c02b3716cc57dd02ad4bdb1ec8700000000",
"0200000001f9f960f336656d7cb90463735a8516113f4493516d43b893e5338cff6d25179301000000fd4d020047304402201b096ec23b5a769b4244774c65a4977996f839314724703dc8850fd6a7ee097a0220410d125df7626faa350b0e42fe749e79f0a28667bee42a130b7cd575ed24a57c014d01025b210209f45f7adb48d3a2bcc62ab49a29df822fdaf6b2c1e26afc48529a6a4272240c21023a37b1ec16f5d073ed4c1c435ac0dad2031f2d0188d439a5655b3bd1e8d9f0d72103a9e498958e3b816c89a6886adadc65a67e3658dfbc0c2a8d898536a64bb14ee22103d99a8ac95d78488394f0611bf3a654a726bb47b1453ed8ba93a26a868419c858210276447b1c51823c89359b64ae03ce23497caee8e4a3ce0b0616b18102c2f909122103b935a588f8d1f38af0926ba8b32fa4d2f549e97129544852922a45d4853b9a7e2103a154c3e59040df072d6a82a322a8cc48c142f85745749bb4147dfb0265a3c7382102bdbdb15ab4495025990f99edb7ab29f1fed3ae10b6631a7aa0a837053273cbb421039bf0b4f48b33456fca71f541143a5b4c0195e138ccc51ef71d1d4c25a8c3258a2102a7822cd38afae7a31cf8f5443c91c877d1931aeb58bd319fa7c95a7666bb07852102d23df29f6c723e0ea71b9841c010e18011462ec03a709e8fbd9c1e5ae89967e821026d80ea22ec04ac402a2056b6f10244956f51635825cb1c01f5ca0fe47e336d3321038da52155bb32fd7c835226c1aa8912eab50d214dea29e16a50625c624cc5747f21038a99963e63b998ebf3b02929927f0ab6220241c81589d97f41e6dadf1963f04b210235de1c98d9021cad75aaaf9ebd2a473e1ebf846d0c9d164b648782edacca10a25faeffffffff02c8b654180000000017a91492fb55f5343846b6acfc269a615a82a800f5d6ad87a0fab8010000000017a9141592f4033152839c02b3716cc57dd02ad4bdb1ec8700000000",
"0200000001f9f960f336656d7cb90463735a8516113f4493516d43b893e5338cff6d25179301000000fd4e0200483045022100ce4f81d67d6103cd1f7254276034b45eee292a77a62bf004499ad6c454c551ac022029558549da389320a714f11bdf75a39fab6d5d2af45ad39d23b9d494a871841b014d01025b210209f45f7adb48d3a2bcc62ab49a29df822fdaf6b2c1e26afc48529a6a4272240c21023a37b1ec16f5d073ed4c1c435ac0dad2031f2d0188d439a5655b3bd1e8d9f0d72103a9e498958e3b816c89a6886adadc65a67e3658dfbc0c2a8d898536a64bb14ee22103d99a8ac95d78488394f0611bf3a654a726bb47b1453ed8ba93a26a868419c858210276447b1c51823c89359b64ae03ce23497caee8e4a3ce0b0616b18102c2f909122103b935a588f8d1f38af0926ba8b32fa4d2f549e97129544852922a45d4853b9a7e2103a154c3e59040df072d6a82a322a8cc48c142f85745749bb4147dfb0265a3c7382102bdbdb15ab4495025990f99edb7ab29f1fed3ae10b6631a7aa0a837053273cbb421039bf0b4f48b33456fca71f541143a5b4c0195e138ccc51ef71d1d4c25a8c3258a2102a7822cd38afae7a31cf8f5443c91c877d1931aeb58bd319fa7c95a7666bb07852102d23df29f6c723e0ea71b9841c010e18011462ec03a709e8fbd9c1e5ae89967e821026d80ea22ec04ac402a2056b6f10244956f51635825cb1c01f5ca0fe47e336d3321038da52155bb32fd7c835226c1aa8912eab50d214dea29e16a50625c624cc5747f21038a99963e63b998ebf3b02929927f0ab6220241c81589d97f41e6dadf1963f04b210235de1c98d9021cad75aaaf9ebd2a473e1ebf846d0c9d164b648782edacca10a25faeffffffff02c8b654180000000017a91492fb55f5343846b6acfc269a615a82a800f5d6ad87a0fab8010000000017a9141592f4033152839c02b3716cc57dd02ad4bdb1ec8700000000",
"0200000001f9f960f336656d7cb90463735a8516113f4493516d43b893e5338cff6d25179301000000fd4d0200473044022066db0983b11381d27f88d20ad7a03da52559364ea7d026df1b0d6c490ea36caa0220123ae0296601d94c0c72d6c78381b72c2543dd682b758a9a7a7d7e086967178e014d01025b210209f45f7adb48d3a2bcc62ab49a29df822fdaf6b2c1e26afc48529a6a4272240c21023a37b1ec16f5d073ed4c1c435ac0dad2031f2d0188d439a5655b3bd1e8d9f0d72103a9e498958e3b816c89a6886adadc65a67e3658dfbc0c2a8d898536a64bb14ee22103d99a8ac95d78488394f0611bf3a654a726bb47b1453ed8ba93a26a868419c858210276447b1c51823c89359b64ae03ce23497caee8e4a3ce0b0616b18102c2f909122103b935a588f8d1f38af0926ba8b32fa4d2f549e97129544852922a45d4853b9a7e2103a154c3e59040df072d6a82a322a8cc48c142f85745749bb4147dfb0265a3c7382102bdbdb15ab4495025990f99edb7ab29f1fed3ae10b6631a7aa0a837053273cbb421039bf0b4f48b33456fca71f541143a5b4c0195e138ccc51ef71d1d4c25a8c3258a2102a7822cd38afae7a31cf8f5443c91c877d1931aeb58bd319fa7c95a7666bb07852102d23df29f6c723e0ea71b9841c010e18011462ec03a709e8fbd9c1e5ae89967e821026d80ea22ec04ac402a2056b6f10244956f51635825cb1c01f5ca0fe47e336d3321038da52155bb32fd7c835226c1aa8912eab50d214dea29e16a50625c624cc5747f21038a99963e63b998ebf3b02929927f0ab6220241c81589d97f41e6dadf1963f04b210235de1c98d9021cad75aaaf9ebd2a473e1ebf846d0c9d164b648782edacca10a25faeffffffff02c8b654180000000017a91492fb55f5343846b6acfc269a615a82a800f5d6ad87a0fab8010000000017a9141592f4033152839c02b3716cc57dd02ad4bdb1ec8700000000",
"0200000001f9f960f336656d7cb90463735a8516113f4493516d43b893e5338cff6d25179301000000fd4d02004730440220467817ee898265ad32edeb7659456565423e944539b2852e450e01867dbd312f0220723b360ee041e210dacf63030323d53c15b1c9fe10a53cd9ded29b49e589648f014d01025b210209f45f7adb48d3a2bcc62ab49a29df822fdaf6b2c1e26afc48529a6a4272240c21023a37b1ec16f5d073ed4c1c435ac0dad2031f2d0188d439a5655b3bd1e8d9f0d72103a9e498958e3b816c89a6886adadc65a67e3658dfbc0c2a8d898536a64bb14ee22103d99a8ac95d78488394f0611bf3a654a726bb47b1453ed8ba93a26a868419c858210276447b1c51823c89359b64ae03ce23497caee8e4a3ce0b0616b18102c2f909122103b935a588f8d1f38af0926ba8b32fa4d2f549e97129544852922a45d4853b9a7e2103a154c3e59040df072d6a82a322a8cc48c142f85745749bb4147dfb0265a3c7382102bdbdb15ab4495025990f99edb7ab29f1fed3ae10b6631a7aa0a837053273cbb421039bf0b4f48b33456fca71f541143a5b4c0195e138ccc51ef71d1d4c25a8c3258a2102a7822cd38afae7a31cf8f5443c91c877d1931aeb58bd319fa7c95a7666bb07852102d23df29f6c723e0ea71b9841c010e18011462ec03a709e8fbd9c1e5ae89967e821026d80ea22ec04ac402a2056b6f10244956f51635825cb1c01f5ca0fe47e336d3321038da52155bb32fd7c835226c1aa8912eab50d214dea29e16a50625c624cc5747f21038a99963e63b998ebf3b02929927f0ab6220241c81589d97f41e6dadf1963f04b210235de1c98d9021cad75aaaf9ebd2a473e1ebf846d0c9d164b648782edacca10a25faeffffffff02c8b654180000000017a91492fb55f5343846b6acfc269a615a82a800f5d6ad87a0fab8010000000017a9141592f4033152839c02b3716cc57dd02ad4bdb1ec8700000000"};
	std::string redeemscript = "5b210209f45f7adb48d3a2bcc62ab49a29df822fdaf6b2c1e26afc48529a6a4272240c21023a37b1ec16f5d073ed4c1c435ac0dad2031f2d0188d439a5655b3bd1e8d9f0d72103a9e498958e3b816c89a6886adadc65a67e3658dfbc0c2a8d898536a64bb14ee22103d99a8ac95d78488394f0611bf3a654a726bb47b1453ed8ba93a26a868419c858210276447b1c51823c89359b64ae03ce23497caee8e4a3ce0b0616b18102c2f909122103b935a588f8d1f38af0926ba8b32fa4d2f549e97129544852922a45d4853b9a7e2103a154c3e59040df072d6a82a322a8cc48c142f85745749bb4147dfb0265a3c7382102bdbdb15ab4495025990f99edb7ab29f1fed3ae10b6631a7aa0a837053273cbb421039bf0b4f48b33456fca71f541143a5b4c0195e138ccc51ef71d1d4c25a8c3258a2102a7822cd38afae7a31cf8f5443c91c877d1931aeb58bd319fa7c95a7666bb07852102d23df29f6c723e0ea71b9841c010e18011462ec03a709e8fbd9c1e5ae89967e821026d80ea22ec04ac402a2056b6f10244956f51635825cb1c01f5ca0fe47e336d3321038da52155bb32fd7c835226c1aa8912eab50d214dea29e16a50625c624cc5747f21038a99963e63b998ebf3b02929927f0ab6220241c81589d97f41e6dadf1963f04b210235de1c98d9021cad75aaaf9ebd2a473e1ebf846d0c9d164b648782edacca10a25fae";
	auto obj = priv_btc.combine_trxs(a);
	//fc::variant(obj).as_string();
	
	


	
// 
// 	btc_privatekey priv;
// 	std::string wif = priv.get_wif_key();
// 	printf("the wif is %s\n", wif.c_str());
// 
// 	libbitcoin::wallet::ec_private libbitcoin_priv(wif);
// 	libbitcoin::ec_secret secret = libbitcoin_priv.secret();
// 
// 	std::string hex_string = "394fcb53c3897424646f31361eedb6b0c159cbe2e72415b61a0cc776d8abf446";
// 	libbitcoin::data_chunk  data;
// 	libbitcoin::decode_base16(data, hex_string);
// 	printf("the size is %d\n", data.size());
// 	libbitcoin::hash_digest  hash;
// 	std::copy(data.begin(), data.end(), hash.begin());
// 
// 	libbitcoin::ec_signature  result;
// 
// 	libbitcoin::sign(result, secret, hash);
// 	printf("the result is %s\n", libbitcoin::encode_base16(result).c_str());
// 
// 	libbitcoin::der_signature out;
// 	printf("the result is %s\n", libbitcoin::encode_base16(out).c_str());
//btc_privatekey pkey;
//pkey.import_private_key("KwbYc3Vzs6d52Rz9UsEPMvAF8DLddthU2g8KpqQ2eHyUVTC1tPeq");
//std::string raw_transaction = "020000000101efc30cb46b3561d1ade9df3800ca560325beb92b15993b1078f53c73153be70000000000ffffffff026043993b000000001976a914bbad6509cda94ef4cc7735d41be492c2e9bab45488ac00286bee0000000017a9140f4d3a1d1b70386fe0846ef8432c8ebcc3c9ee058700000000";
//std::string redeemscript = "76a914a29932129ee913c92e40909e9a725195d600ab5f88ac";
////auto str = pkey.sign_trx(raw_transaction,0);
////std::cout << str << std::endl;
//
//auto addr = pkey.get_address();
//fc::optional<fc::ecc::private_key> optional_private_key = graphene::utilities::wif_to_key("5KAffU3Pw7RNJAJ3d1qUrJ6QPVb6UFx6CJ4MhgfoHL7YwYspHhs");
//graphene::chain::public_key_type wif_pub_key = optional_private_key->get_public_key();
//std::cout << wif_pub_key.operator fc::string() << std::endl;
//std::cout << graphene::chain::address(wif_pub_key).address_to_string() << std::endl;
	getchar();
	return 0;
}



